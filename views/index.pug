//- user&home time
//-
html
  head
   title s-twitter(homeline)
  body
    include includes/head.pug
    
    #11 --- time line <a href=#{myhttp+"/tl?nm="+name+"&sp=1"}>to time表示</a>
    table(class="type02")
      tbody
          - for (var i=0 ;i<tw.length/2 ; i=i+2) {
              tr
                  - var sc = tw[i].user.screen_name
                  - var tm = new Date(tw[i].created_at).toLocaleString("ja-JP")
                  //td(style="vertical-align:top;") <img src=#{tw[i].user.profile_image_url} width=32 height=32>
                  td <img src=#{tw[i].user.profile_image_url} width=32 height=32>
                  - var idm = tw[i].id_str
                  td(width="500") #{i} --#{tm} @<a href=#{myhttp+"/tl?nm="+sc}>#{sc}</a> <a href=#{myhttp+"/us?nm="+sc}>#{tw[i].user.name}</a><br>
                      !=  linktxt(tw[i].text,myhttp,myhttp)
                      |&nbsp
                      if tw[i].retweeted_status
                        - var id = tw[i].retweeted_status.id_str
                        <a href=#{myhttp+"/prt?id="+idm}>
                        <img src=#{myhttp+"/img/re3.png"} width=14 align='bottom'>
                        </a>&nbsp
                        <a href=#{myhttp+"/rtg?rt="+id}> re:#{tw[i].retweet_count}</a>
                      else if (tw[i].retweet_count > 0 )
                        - var id = tw[i].id_str
                        <a href=#{myhttp+"/rtg?rt="+id}> re:#{tw[i].retweet_count}</a>

                      != photo(tw[i].extended_entities)


                  - var sc = tw[i+1].user.screen_name
                  - var tm = new Date(tw[i+1].created_at).toLocaleString("ja-JP")
                  td <img src=#{tw[i+1].user.profile_image_url} width=32 height=32>
                  - var idm = tw[i+1].id_str
                  td(width="500") #{i+1} --#{tm} @<a href=#{myhttp+"/tl?nm="+sc}>#{sc}</a> <a href=#{myhttp+"/us?nm="+sc}>#{tw[i+1].user.name}</a><br>
                      !=  linktxt(tw[i+1].text,myhttp,myhttp)
                      |&nbsp
                      if tw[i+1].retweeted_status
                        - var id = tw[i+1].retweeted_status.id_str
                        <a href=#{myhttp+"/prt?id="+idm}>
                        <img src=#{myhttp+"/img/re3.png"} width=14 align='bottom'>
                        </a>&nbsp
                        <a href=#{myhttp+"/rtg?rt="+id}> re:#{tw[i+1].retweet_count}</a>
                      else if (tw[i+1].retweet_count > 0 )
                        - var id = tw[i+1].id_str
                        <a href=#{myhttp+"/rtg?rt="+id}> re:#{tw[i+1].retweet_count}</a>

                      != photo(tw[i+1].extended_entities)
          - }

    script
      - 
        function linktxt(txt,urls,myhttp) {
        text2 = txt.replace(/(https:[/.\w]+)/g,"<a href='$1' target='_blank'>$1</a>")
        text2 = text2.replace(/@(\w+):/,"<a href="+myhttp+"/us?nm=$1>@$1:</a>")
        if (urls!=undefine && urls.media!=undefine) { 
           text2 = text2+"<img src="+urls.media[0].media_url_https+" width=100,height=50>" 
        }
        return text2               
        }

       function ret(idm){
        rr = myhttp + '/prt?id=' +idm;
        location.href(rr);
       }
    
       function photo(urls) {
        text2=""    
        if (urls!=undefine && urls.media!=undefine) { 
           text2 = text2+"<img src="+urls.media[0].media_url_https+" width=100 align='right'>'" 
           text2 = "<a href="+urls.media[0].media_url_https+" target='_blank'>"+text2+"</a>" 
        }
        return text2               
       }
  
